<!-- Meta tags -->
<!-- Basic meta tags -->
<update-title title="{{ vm.title }}"></update-title>
<update-meta name="description" content="{{ vm.desc }}"></update-meta>

<!-- Facebook META -->
<update-meta property="og:title" content="{{ vm.title }}"></update-meta>
<update-meta property="og:description" content="{{ vm.desc }}"></update-meta>
<update-meta property="og:url" use-abs-url="true"></update-meta>
<update-meta property="og:image" content="{{ vm.image }}"></update-meta>

<!-- Twitter META -->
<update-meta name="twitter:title" content="{{ vm.title }}"></update-meta>
<update-meta name="twitter:description" content="{{ vm.desc }}"></update-meta>
<update-meta name="twitter:url" use-abs-url="true"></update-meta>
<update-meta name="twitter:image" content="{{ vm.image }}"></update-meta>

<md-toolbar class="md-primary">
	<div flex-offset-lg="15" flex-lg="70" flex-offset-xl="25" flex-xl="50">
		<div layout="row" layout-padding>
			<div class="header-image-container">
				<img ng-src="{{::vm.issue.imageUrl}}" alt="Issue Image">
			</div>
		</div>

		<div layout-padding layout="row">
			<div class="header-description" ng-class="{full: vm.showFullDesc}" ng-bind-html="vm.issue.description"></div>
		</div>

		<md-button ng-click="vm.showFullDesc=!vm.showFullDesc">
			<span ng-if="vm.showFullDesc">Show Less</span>
			<span ng-if="!vm.showFullDesc">...Show More</span>
		</md-button>

		<div layout-padding layout="column" ng-if="vm.issue.tags.length > 0">
			<md-chips class="descriptionChips" ng-model="vm.issue.tags" readonly="true" md-removable="false">
			</md-chips>
		</div>

		<div layout="row" layout-align="start center" layout-padding>

			<div ng-if="authentication.user.roles.indexOf('admin')>-1 || authentication.user._id===vm.issue.user._id">
				<md-button class="md-icon-button" ng-click="vm.delete()">
					<md-tooltip>Delete Issue</md-tooltip>
					<md-icon>delete</md-icon>
				</md-button>
				<md-button class="md-icon-button" ui-sref="issues.edit({issueId: vm.issue._id})">
					<md-tooltip>Edit Issue</md-tooltip>
					<md-icon>edit</md-icon>
				</md-button>
			</div>
			<md-fab-speed-dial md-direction="right" class="md-scale" ng-click="$event.stopPropagation();">
				<md-fab-trigger>
					<md-button aria-label="Share" class="md-icon-button share-button">
						<md-tooltip>Share</md-tooltip>
						<md-icon>share</md-icon>
					</md-button>
				</md-fab-trigger>

				<md-fab-actions>
					<md-button aria-label="Share to Facebook" class="md-icon-button share-button" ng-click="vm.share('facebook')">
						<md-icon md-svg-src="/modules/core/client/img/facebook.svg"></md-icon>
						<md-tooltip>Facebook</md-tooltip>
					</md-button>

					<md-button aria-label="Share on Twitter" class="md-icon-button share-button" ng-click="vm.share('twitter')">
						<md-icon md-svg-src="/modules/core/client/img/twitter.svg"></md-icon>
						<md-tooltip>Twitter</md-tooltip>
					</md-button>

					<md-button aria-label="Share on Google+" class="md-icon-button share-button" ng-click="vm.share('google_plus')">
						<md-icon md-svg-src="/modules/core/client/img/google-plus.svg"></md-icon>
						<md-tooltip>Google+</md-tooltip>
					</md-button>

					<md-button aria-label="Share on LinkedIn" class="md-icon-button share-button" ng-click="vm.share('linkedin')">
						<md-icon md-svg-src="/modules/core/client/img/linkedin.svg"></md-icon>
						<md-tooltip>LinkedIn</md-tooltip>
					</md-button>

					<md-button aria-label="Share on Reddit" class="md-icon-button share-button" ng-click="vm.share('reddit')">
						<md-icon md-svg-src="/modules/core/client/img/reddit.svg"></md-icon>
						<md-tooltip>Reddit</md-tooltip>
					</md-button>
				</md-fab-actions>
			</md-fab-speed-dial>
		</div>
	</div>
</md-toolbar>

<div flex-offset-lg="15" flex-lg="70" flex-offset-xl="25" flex-xl="50">
	<md-tabs md-dynamic-height md-border-bottom>
		<md-tab label="solutions">
			<solution-list solutions="vm.solutions" issue-id="vm.issueId"></solution-list>
		</md-tab>
		<md-tab label="media">
			<media-list media="vm.media" object-id="vm.issueId", object-type="'issue'"></media-list>
		</md-tab>
	</md-tabs>

	<md-content layout="column" ng-if="!prerender">
		<div layout-padding>
			<div class="polis" data-topic="What do you think?" data-page_id="{{vm.issue._id}}" data-site_id="polis_site_id_7YYdpN4NRpUvCKC7ZU">
			</div>
		</div>
	</md-content>
</div>
